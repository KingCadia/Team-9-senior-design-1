mega = arduino('COM3', 'Mega2560');
time_period = 0.0000625;
duty_cycle = 50;

dir = 1;

while 1
    if dir == 1
        writeDigitalPin(meg)
    end
    writeDigitalPin(mega, 'D2', 1);
    pause(time_period * (duty_cycle / 100));
    writeDigitalPin(mega, 'D2', 0);
    pause(time_period * ((100 - duty_cycle) / 100));
end
